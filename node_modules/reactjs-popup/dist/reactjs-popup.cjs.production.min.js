"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),o=e(t),n=e(require("react-dom"));function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var i="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,a={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},l=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],u=function(e,t,o,n,r){var i=r.offsetX,a=r.offsetY,l=n?8:0,u=o.split(" "),c=t.height,s=t.width,f=e.top+e.height/2-c/2,d=e.left+e.width/2-s/2,p="",v="0%",m="0%";switch(u[0]){case"top":f-=c/2+e.height/2+l,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":f+=c/2+e.height/2+l,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":d-=s/2+e.width/2+l,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":d+=s/2+e.width/2+l,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(u[1]){case"top":f=e.top,v=e.height/2+"px";break;case"bottom":f=e.top-c+e.height,v=c-e.height/2+"px";break;case"left":d=e.left,m=e.width/2+"px";break;case"right":d=e.left-s+e.width,m=s-e.width/2+"px"}return{top:f="top"===u[0]?f-a:f+a,left:d="left"===u[0]?d-i:d+i,transform:p,arrowLeft:m,arrowTop:v}},c=0,s=t.forwardRef((function(e,s){var f=e.trigger,d=void 0===f?null:f,p=e.onOpen,v=void 0===p?function(){}:p,m=e.onClose,h=void 0===m?function(){}:m,y=e.defaultOpen,g=e.open,w=void 0===g?void 0:g,b=e.disabled,E=void 0!==b&&b,k=e.nested,x=void 0!==k&&k,L=e.closeOnDocumentClick,A=void 0===L||L,C=e.repositionOnResize,T=void 0===C||C,O=e.closeOnEscape,R=void 0===O||O,S=e.on,X=void 0===S?["click"]:S,P=e.contentStyle,Y=void 0===P?{}:P,j=e.arrowStyle,z=void 0===j?{}:j,B=e.overlayStyle,I=void 0===B?{}:B,D=e.className,M=void 0===D?"":D,N=e.position,q=void 0===N?"bottom center":N,F=e.modal,H=void 0!==F&&F,_=e.lockScroll,K=void 0!==_&&_,W=e.arrow,G=void 0===W||W,J=e.offsetX,Q=void 0===J?0:J,U=e.offsetY,V=void 0===U?0:U,Z=e.mouseEnterDelay,$=void 0===Z?100:Z,ee=e.mouseLeaveDelay,te=void 0===ee?100:ee,oe=e.keepTooltipInside,ne=void 0!==oe&&oe,re=e.children,ie=t.useState(w||void 0!==y&&y),ae=ie[0],le=ie[1],ue=t.useRef(null),ce=t.useRef(null),se=t.useRef(null),fe=t.useRef(null),de=t.useRef("popup-"+ ++c),pe=!!H||!d,ve=t.useRef(0);i((function(){return ae?(fe.current=document.activeElement,Ce(),xe(),Ee()):ke(),function(){clearTimeout(ve.current)}}),[ae]),t.useEffect((function(){"boolean"==typeof w&&(w?me():he())}),[w,E]);var me=function(){ae||E||(le(!0),setTimeout(v,0))},he=function(){ae&&!E&&(le(!1),pe&&fe.current.focus(),setTimeout(h,0))},ye=function(e){null==e||e.stopPropagation(),ae?he():me()},ge=function(){clearTimeout(ve.current),ve.current=setTimeout(me,$)},we=function(e){null==e||e.preventDefault(),ye()},be=function(){clearTimeout(ve.current),ve.current=setTimeout(he,te)},Ee=function(){pe&&K&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},ke=function(){pe&&K&&(document.getElementsByTagName("body")[0].style.overflow="auto")},xe=function(){var e,t=null==ce||null===(e=ce.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(t)[0];null==o||o.focus()};t.useImperativeHandle(s,(function(){return{open:function(){me()},close:function(){he()},toggle:function(){ye()}}}));var Le,Ae,Ce=function(){if(!pe&&ae&&(null==ue?void 0:ue.current)&&(null==ue?void 0:ue.current)&&(null==ce?void 0:ce.current)){var e,t,o=function(e,t,o,n,r,i){var a=r.offsetX,c=r.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},f=0,d=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var o=document.querySelector(e);null!==o&&(t=o.getBoundingClientRect())}return t}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,l));f<p.length;){var v={top:(s=u(e,t,p[f],n,{offsetX:a,offsetY:c})).top,left:s.left,width:t.width,height:t.height};if(!(v.top<=d.top||v.left<=d.left||v.top+v.height>=d.top+d.height||v.left+v.width>=d.left+d.width))break;f++}return s}(ue.current.getBoundingClientRect(),ce.current.getBoundingClientRect(),q,G,{offsetX:Q,offsetY:V},ne);ce.current.style.top=o.top+window.scrollY+"px",ce.current.style.left=o.left+window.scrollX+"px",G&&se.current&&(se.current.style.transform=o.transform,se.current.style.setProperty("-ms-transform",o.transform),se.current.style.setProperty("-webkit-transform",o.transform),se.current.style.top=(null===(e=z.top)||void 0===e?void 0:e.toString())||o.arrowTop,se.current.style.left=(null===(t=z.left)||void 0===t?void 0:t.toString())||o.arrowLeft)}};void 0===(Ae=R)&&(Ae=!0),t.useEffect((function(){if(Ae){var e=function(e){"Escape"===e.key&&Le()};return document.addEventListener("keyup",e),function(){Ae&&document.removeEventListener("keyup",e)}}}),[Le=he,Ae]),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(t){if(9===t.keyCode){var o,n=null==e||null===(o=e.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void t.preventDefault();var i=r[0],a=r[r.length-1];t.shiftKey&&document.activeElement===i?(t.preventDefault(),a.focus()):document.activeElement===a&&(t.preventDefault(),i.focus())}};return document.addEventListener("keydown",t),function(){o&&document.removeEventListener("keydown",t)}}}),[e,o])}(ce,ae&&pe),function(e,o){void 0===o&&(o=!0),t.useEffect((function(){if(o){var t=function(){e()};return window.addEventListener("resize",t),function(){o&&window.removeEventListener("resize",t)}}}),[e,o])}(Ce,T),function(e,o,n){void 0===n&&(n=!0),t.useEffect((function(){if(n){var t=function(t){var n=Array.isArray(e)?e:[e],r=!1;n.forEach((function(e){e.current&&!e.current.contains(t.target)||(r=!0)})),t.stopPropagation(),r||o()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){n&&(document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t))}}}),[e,o,n])}(d?[ce,ue]:[ce],he,A&&!x);var Te,Oe=function(){return o.createElement("div",Object.assign({},(e=pe?a.popupContent.modal:a.popupContent.tooltip,t={className:"popup-content "+(""!==M?M.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:r({},e,Y,{pointerEvents:"auto"}),ref:ce,onClick:function(e){e.stopPropagation()}},!H&&X.indexOf("hover")>=0&&(t.onMouseEnter=ge,t.onMouseLeave=be),t),{key:"C",role:pe?"dialog":"tooltip",id:de.current}),G&&!pe&&o.createElement("div",{ref:se,style:a.popupArrow},o.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==M?M.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},z)},o.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),re&&"function"==typeof re?re(he,ae):re);var e,t},Re=!(X.indexOf("hover")>=0),Se=pe?a.overlay.modal:a.overlay.tooltip,Xe=[Re&&o.createElement("div",{key:"O","data-testid":"overlay","data-popup":pe?"modal":"tooltip",className:"popup-overlay "+(""!==M?M.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:r({},Se,I,{pointerEvents:A&&x||pe?"auto":"none"}),onClick:A&&x?he:void 0,tabIndex:-1},pe&&Oe()),!pe&&Oe()];return o.createElement(o.Fragment,null,function(){for(var e={key:"T",ref:ue,"aria-describedby":de.current},t=Array.isArray(X)?X:[X],n=0,r=t.length;n<r;n++)switch(t[n]){case"click":e.onClick=ye;break;case"right-click":e.onContextMenu=we;break;case"hover":e.onMouseEnter=ge,e.onMouseLeave=be;break;case"focus":e.onFocus=ge,e.onBlur=be}if("function"==typeof d){var i=d(ae);return!!d&&o.cloneElement(i,e)}return!!d&&o.cloneElement(d,e)}(),ae&&n.createPortal(Xe,(null===(Te=document.getElementById("popup-root"))&&((Te=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Te)),Te)))}));exports.Popup=s,exports.default=s;
//# sourceMappingURL=reactjs-popup.cjs.production.min.js.map
